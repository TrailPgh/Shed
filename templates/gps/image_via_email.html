{% extends 'base.html' %}

{% block title %}Email an Image: GPS: {% endblock %}

{% block content %}

    <div>
        /
        <a href="/">Home</a>
        /
        <a href="./">GPS</a>
    </div>
    <hr />

    {% if lat or lon %}
        <h2>
            Results
        </h2>
        <fieldset>
            <legend>
                Latitude, Longitude
            </legend>
            <p>
                {{ lat }}, {{ lon }}
            </p>
        </fieldset>
        <p style="margin-top: 60px;">
            Go here to
            <a href="/gps/rcv_image_email">
                start over
            </a>
        </p>
    {% endif %}

    {% if lat == None %}
        <h1>
            Extract GPS Coords from an Image Attached to an Email
        </h1>
        <h2>
            This is working.
        </h2>
        <p>
            It uses SendGrid
            {% with inbound_parse_url="https://www.twilio.com/docs/sendgrid/for-developers/parsing-email/setting-up-the-inbound-parse-webhook" %}
                <a href="{{ inbound_parse_url }}" target="_blank">Inbound Parse</a>
            {% endwith %}
            to receive the email.
        </p>

        <fieldset class="well">
            <legend>
                Email an Image with GPS Coords
            </legend>

            Email a photo to this address:
            <a href="mailto:gps-image@shed.trailpittsburgh.org">
                gps-image@shed.trailpittsburgh.org
            </a>

        </fieldset>

        <p>
            Please note that this is very "alpha" and will have rough edges.
        </p>
        <ul>
            <li>JPEG is probably best, though several photo formats may work.</li>
            <li>Only the first image is processed if more than one is attached</li>
            <li>
                This app will reply to your email
                <ul>
                    <li>
                        using the subject line received
                    </li>
                    <li>
                        and GPS coordinates if found, or else a message indicating the outcome.
                    </li>
                </ul>
            </li>
            <li>
                If you don't get a reply
                <ul>
                    <li>
                        Check your spam folder
                    </li>
                    <li>
                        Or it may have encountered an error
                    </li>
                </ul>
            </li>
            <li>This app discards the email, image(s), and GPS coordinates after processing.</li>
        </ul>

    {% endif %}

{% endblock %}
